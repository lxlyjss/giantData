<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<title>giant数据</title>
		<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css"/>
		<link rel="stylesheet" type="text/css" href="css/daterangepicker.css"/>
		<link rel="stylesheet" type="text/css" href="css/lxl.css"/>
		<script src="http://libs.baidu.com/jquery/2.0.0/jquery.min.js"></script>
		<script src="js/main.js" type="text/javascript" charset="utf-8"></script>
		<script type="text/javascript">
			$(function (){
				//判断当前设备屏幕宽度
				var deviceWidth = $(document).width();
				if(deviceWidth > 1000){
					$("body").addClass("nav-md");
				}else{
					$("body").addClass("nav-sm");
				}
				//当前文档的高度
				$("#aside").css("height",$(document).height());
				$(window).resize(function (){
					$("#aside").css("height",$(document).height());
				});
			});
		</script>
	</head>
	<body class="products-list">
		<div id="page">
			<div id="aside">
				<div class="navbar">
					<div class="return-giant">
						<a href="http://www.giant.com.cn">
						<i class="iconfont icon-fangxiangzuo"></i>
						<span>返回捷安特官网</span></a>
					</div>
					<div class="user-info">
						<div class="user-img">
							<div class="user-img-circle">
								<img src="img/img.jpg" alt="" />
							</div>
						</div>
						<div class="user-welcome">
							<p>经销商</p>
							<p>大熊猫</p>
						</div>
					</div>
					<div class="close-btn">
						<i class="iconfont icon-guanbi"></i>
					</div>
					<ul class="nav-slide-menu">
						<li class="nav-list home-page">
							<a>
								<i class="iconfont icon-home"></i>
								首页
							</a>
						</li>
						<li class="nav-list home-page">
							<a>
								<i class="iconfont icon-xiaoxi"></i>
								门店管理
								<i class="iconfont icon-fangxiangyou"></i>
							</a>
							<ul class="child-slide-menu">
								<li class="current">
									<a href="service-list.html">服务评价列表</a>
								</li>
								<li>
									<a href="javascript:;">通路积分列表</a>
								</li>
								<li>
									<a href="javascript:;">积分记录</a>
								</li>
							</ul>
						</li>
						<li class="nav-list active">
							<a>
								<i class="iconfont icon-shuju"></i>
								会员管理
								<i class="iconfont icon-fangxiangyou"></i>
							</a>
							<ul class="child-slide-menu" style="display: block;">
								<li class="current">
									<a href="vip-list.html">会员列表</a>
								</li>
								<li>
									<a href="vip-from.html">会员来源</a>
								</li>
								<li>
									<a href="vip-change.html">会员变化趋势</a>
								</li>
								<li>
									<a href="vip-bike.html">车主会员比例</a>
								</li>
							</ul>
						</li>
						<li class="nav-list active">
							<a>
								<i class="iconfont icon-shuju"></i>
								产品管理
								<i class="iconfont icon-fangxiangyou"></i>
							</a>
							<ul class="child-slide-menu" style="display: block;">
								<li>
									<a href="products-charts.html">产品销售数据</a>
								</li>
								<li class="current">
									<a href="productsList.html">产品评价列表</a>
								</li>
								<li class="current">
									<a href="products-pingjia.html">产品评价数据</a>
								</li>
							</ul>
						</li>
					</ul>
				</div>
			</div>
			<!--左侧边栏结束-->
			<!--右侧内容开始-->
			<div id="content">
				<!--头部 开始-->
				<div class="header">
					<div class="menu-btn">
						<i class="iconfont icon-caidan caidan-btn"></i>
					</div>
					<div class="header-title">
						<p>捷安特大数据中心</p>
					</div>
					<div class="user-manage">
						<div class="user-content">
							<img src="img/img.jpg" alt="" />
							<span>大熊猫</span>
							<i class="iconfont icon-fangxiangxia"></i>
						</div>
						<ul class="drop-down">
							<li>帮助</li>
							<li>个人资料</li>
							<li>退出</li>
						</ul>
					</div>
				</div>
				<!--头部 结束-->
				<!--中间内容开始-->
				<div class="content">
					<!--title start -->
					<div class="row page-title">

					</div>
					<!--title end -->
					<!--查询条件-->
					<div class="row search-content">
						<div class="col-md-3">
							<div class="input-group filter-select">
								<span class="input-group-addon">类型</span>
								<select name="" class="form-control">
									<option value="">请选择</option>
								</select>
							</div>
						</div>
						<div class="col-md-2 search-btn">
							<button class="btn btn-primary">查询</button>
						</div>
					</div>
					<!--查询条件-->
					<!--会员数据-->
					<div class="row vip-wrapper" style="background: #fff;">
						<div class="col-md-12 col-sm-12" style="overflow-x: scroll;z-index: 9;">
							<div class="vip-container">
								<div class="table-responsive">
									<table class="table table-bordered table-hover">
										<thead>
											<tr style="text-align: center">
												<th>类型</th>
												<th>code</th>
												<th>名称</th>
												<th>总积分</th>
												<th>操作</th>
											</tr>
										</thead>
										<tbody>
										</tbody>
									</table>
								</div>
							</div>
						</div>
						<div class="col-md-12 page-container">
							<nav aria-label="Page navigation">
								<ul class="pagination">
									<li><a href=\"javascript:;\" aria-label=\"Previous\"><span aria-hidden=\"true\">上一页</span></a></li><li><a href=\"javascript:;\">1</a></li><li><a href=\"javascript:;\">...</a></li><li><a href=\"javascript:;\">"+ (p-3) +"</a></li><li><a href=\"javascript:;\">"+ (p - 2) +"</a></li><li><a href=\"javascript:;\">"+(p-1)+"</a></li><li><a href=\"javascript:;\">"+p+"</a></li><li><a href=\"javascript:;\">"+p+"</a></li><li><a href=\"javascript:;\" aria-label=\"Next\"><span aria-hidden=\"true\">下一页</span></a></li>
								</ul>
							</nav>
						</div>
					</div>
					<!--会员数据-->
				</div>
				<!--中间内容结束-->
			</div>
			<!--右侧内容结束-->
		</div>
		<script>
			var data = {
                "result":"1",
                "filter":{
                    "area":["区域1","区域2","区域三"],
                    "tag":["标签	1","标签2","标签3"]
                },
                "pingJiaCount":"878445",
                "pingJiaData":[
                    {
                        "storeName":"捷安特来广营专卖店",
                        "storeCode":"123456",
                        "dealerCode":"888888",
                        "SBU":"GCK",
						"id":"123"
                    },
                    {
                        "storeName":"捷安特来广营专卖店",
                        "storeCode":"123456",
                        "dealerCode":"888888",
                        "SBU":"GCK",
                        "id":"124"
                    },
                    {
                        "storeName":"捷安特来广营专卖店",
                        "storeCode":"123456",
                        "dealerCode":"888888",
                        "SBU":"GCK",
                        "id":"125"
                    },
                    {
                        "storeName":"捷安特来广营专卖店",
                        "storeCode":"123456",
                        "dealerCode":"888888",
                        "SBU":"GCK",
                        "id":"126"
                    },
                    {
                        "storeName":"捷安特来广营专卖店",
                        "storeCode":"123456",
                        "dealerCode":"888888",
                        "SBU":"GCK",
                        "id":"127"
                    },
                    {
                        "storeName":"捷安特来广营专卖店",
                        "storeCode":"123456",
                        "dealerCode":"888888",
                        "SBU":"GCK",
                        "id":"128"
                    },
                    {
                        "storeName":"捷安特来广营专卖店",
                        "storeCode":"123456",
                        "dealerCode":"888888",
                        "SBU":"GCK",
                        "id":"129"
                    },
                    {
                        "storeName":"捷安特来广营专卖店",
                        "storeCode":"123456",
                        "dealerCode":"888888",
                        "SBU":"GCK",
                        "id":"130"
                    },
                    {
                        "storeName":"捷安特来广营专卖店",
                        "storeCode":"123456",
                        "dealerCode":"888888",
                        "SBU":"GCK",
                        "id":"131"
                    },
                    {
                        "storeName":"捷安特来广营专卖店",
                        "storeCode":"123456",
                        "dealerCode":"888888",
                        "SBU":"GCK",
                        "id":"132"
                    }
                ]
            }
            //点击查看详细会员信息
            function readMore(index){
                $(".moreInfo-wrapper").addClass("open-more").fadeIn(500);
                var thisData = data.pingJiaData[index];
                console.log(thisData)
                var arr = [];
                for( var v in thisData ){
                    arr.push(thisData[v]);
                }
                for(var j = 0;j < arr.length;j++){
                    if(arr[j] instanceof Array){
                        for(var i = 0; i < arr[j].length;i++){
                            $(".moreInfo-wrapper table tr").eq(j).children("td").html("empty");
                        }
                    }else{
                        $(".moreInfo-wrapper table tr").eq(j).children("td").html(arr[j]);
                    }
                    if(j == 4){
                        $(".moreInfo-wrapper table tr").eq(j).children("td").html("<img src='"+arr[j]+"' width='80'/>");
                    }
                }
            }
			function VipData(){
                //请求数据,会员总数,
                var vipCount;
                //当前页数
				var nowPage;
				//总页数
				var allPage;
				//页面是否初始化
				var isStart = true;
				if(isStart){
                    nowPage = 1;
                    getAjaxData();
                }
                //选页
                window.selectPage = function (n){
					//console.log(88)
                    cutPage("596653",n);
                }
                //获取后台数据,页面初始化
				function getAjaxData(){
//                    $.ajax({
//						url:"http://mobile.72bike.com/open/fenxiang/we_chat.action",
//						data:"",
//						ansyc:false,
//						dataType:"json",
//						success:function (result){
//						    vipCount = result;
                            showData();
                            cutPage("596653",nowPage)
//						    console.log(vipCount)
//						}
//					});
				}
				//展示数据
                function showData() {
                    var pageData =data.pingJiaData;
                    for(var i = 0;i < pageData.length;i++){
                        var tableList = $("<tr style=\"text-align: center;\">" +
                            "<td>"+pageData[i].storeName+"</td>" +
                            "<td>"+pageData[i].storeCode+"</td>" +
                            "<td>"+pageData[i].dealerCode+"</td>" +
                            "<td>"+pageData[i].SBU+"</td>" +
                            "<td><a onclick='readRecord("+pageData[i].id+")'>查看记录</a></td>" +
                            "</tr>");
                        $(".vip-container table tbody").append(tableList);
                    }
                    console.log(989)
                }
				//分页
				function cutPage(p,n){
					//获取当前页数
					p = Math.ceil(p/10);
					if(n <= 4 && n != "" && n >0){
						$(".page-container .pagination").html("<li><a href=\"javascript:;\" aria-label=\"Previous\" onclick='selectPage("+(n-1)+")'><span aria-hidden=\"true\">上一页</span></a></li><li><a href=\"javascript:;\" onclick='selectPage(1)'>1</a></li><li><a href=\"javascript:;\" onclick='selectPage(2)'>2</a></li><li><a href=\"javascript:;\" onclick='selectPage(3)'>3</a></li><li><a href=\"javascript:;\" onclick='selectPage(4)'>4</a></li><li><a href=\"javascript:;\" onclick='selectPage(5)'>5</a></li><li><a href=\"javascript:;\">...</a></li><li><a href=\"javascript:;\"onclick='selectPage("+p+")'>"+p+"</a></li><li><a href=\"javascript:;\" aria-label=\"Next\" onclick='selectPage("+(n+1)+")'><span aria-hidden=\"true\">下一页</span></a></li>");
						$(".page-container .pagination li").eq(n).addClass("active");
					}else if(n > 4 && n <= (p-4)){
						$(".page-container .pagination").html("<li><a href=\"javascript:;\" aria-label=\"Previous\" onclick='selectPage("+(n-1)+")'><span aria-hidden=\"true\">上一页</span></a></li><li><a href=\"javascript:;\" onclick='selectPage(1)'>1</a></li><li><a href=\"javascript:;\">...</a></li><li><a href=\"javascript:;\" onclick='selectPage("+(n-1)+")'>"+(n-1)+"</a></li><li class=\"active\"><a href=\"javascript:;\" onclick='selectPage("+n+")'>"+ n +"</a></li><li><a href=\"javascript:;\" onclick='selectPage("+(n+1)+")'>"+(n+1)+"</a></li><li><a href=\"javascript:;\">...</a></li><li><a href=\"javascript:;\" onclick='selectPage("+p+")'>"+p+"</a></li><li><a href=\"javascript:;\" aria-label=\"Next\" onclick='selectPage("+(n+1)+")'><span aria-hidden=\"true\">下一页</span></a></li>");
					}else if(n > (p-4) && n <= p){
						$(".page-container .pagination").html(" <li><a href=\"javascript:;\" aria-label=\"Previous\" onclick='selectPage("+(n-1)+")'><span aria-hidden=\"true\">上一页</span></a></li><li><a href=\"javascript:;\" onclick='selectPage(1)'>1</a></li><li><a href=\"javascript:;\">...</a></li><li><a href=\"javascript:;\" onclick='selectPage("+(p-4)+")'>"+ (p-4) +"</a></li><li><a href=\"javascript:;\" onclick='selectPage("+(p-3)+")'>"+ (p-3) +"</a></li><li><a href=\"javascript:;\" onclick='selectPage("+(p-2)+")'>"+ (p - 2) +"</a></li><li><a href=\"javascript:;\" onclick='selectPage("+(p-1)+")'>"+(p-1)+"</a></li><li><a href=\"javascript:;\" onclick='selectPage("+p+")'>"+p+"</a></li><li><a href=\"javascript:;\" aria-label=\"Next\" onclick='selectPage("+(n+1)+")'><span aria-hidden=\"true\">下一页</span></a></li>");
						$(".page-container .pagination li").eq(7-(p-n)).addClass("active");
					}
				}
			}
            VipData();

		</script>
	</body>
</html>
